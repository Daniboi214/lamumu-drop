<!DOCTYPE html>
<html>
<head>
<title>Cow Catch Game</title>
<style>
    body {
        background-color: black;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    canvas {
        background: #222;
        display: block;
        margin: 20px auto;
        border: 2px solid white;
    }
    #startScreen, #gameOverScreen {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10;
    }
    button {
        background: orange;
        border: none;
        padding: 12px 24px;
        font-size: 20px;
        cursor: pointer;
        margin-top: 20px;
        border-radius: 8px;
    }
    button:hover {
        background: gold;
    }
</style>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="startScreen">
    <h1>üêÑ Cow Catch Game üêÑ</h1>
    <button onclick="startGame()">Start Game</button>
</div>

<div id="gameOverScreen" style="display:none;">
    <h1>Game Over</h1>
    <p id="scoreDisplay"></p>
    <p id="highScoreDisplay"></p>
    <button onclick="restartGame()">Play Again</button>
</div>

<canvas id="gameCanvas" width="480" height="320"></canvas>

<audio id="catchSound" src="catch.wav"></audio>
<audio id="missSound" src="miss.wav"></audio>
<audio id="themeMusic" src="theme.mp3" loop></audio>

<script>
let canvas = document.getElementById("gameCanvas");
let ctx = canvas.getContext("2d");

let paddleHeight = 10;
let paddleWidth = 90;
let paddleX = (canvas.width - paddleWidth) / 2;

let rightPressed = false;
let leftPressed = false;

let cow = { x: Math.random() * (canvas.width - 50), y: 0, size: 50, speed: 1.7 }; // slowed by ~15%
let score = 0;
let highScore = localStorage.getItem("highScore") || 0;
let gameInterval;
let themeMusic = document.getElementById("themeMusic");

document.addEventListener("keydown", keyDownHandler);
document.addEventListener("keyup", keyUpHandler);

function keyDownHandler(e) {
    if(e.key === "Right" || e.key === "ArrowRight") rightPressed = true;
    else if(e.key === "Left" || e.key === "ArrowLeft") leftPressed = true;
}

function keyUpHandler(e) {
    if(e.key === "Right" || e.key === "ArrowRight") rightPressed = false;
    else if(e.key === "Left" || e.key === "ArrowLeft") leftPressed = false;
}

function drawPaddle() {
    ctx.beginPath();
    ctx.rect(paddleX, canvas.height - paddleHeight - 5, paddleWidth, paddleHeight);
    ctx.fillStyle = "orange";
    ctx.fill();
    ctx.closePath();
}

function drawCow() {
    let img = new Image();
    img.src = "cow.jpeg";
    ctx.drawImage(img, cow.x, cow.y, cow.size, cow.size);
}

function drawScore() {
    ctx.font = "16px Arial";
    ctx.fillStyle = "white";
    ctx.fillText("Score: " + score, 8, 20);
}

function updateGame() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPaddle();
    drawCow();
    drawScore();

    // Cow falling
    cow.y += cow.speed;
    if(cow.y > canvas.height) {
        endGame();
        return;
    }

    // Paddle wrap-around
    if(rightPressed) paddleX += 7; // faster paddle
    if(leftPressed) paddleX -= 7;
    if(paddleX + paddleWidth < 0) paddleX = canvas.width;
    if(paddleX > canvas.width) paddleX = -paddleWidth;

    // Collision
    if(
        cow.y + cow.size >= canvas.height - paddleHeight - 5 &&
        cow.x + cow.size > paddleX &&
        cow.x < paddleX + paddleWidth
    ) {
        document.getElementById("catchSound").play();
        score++;
        cow.x = Math.random() * (canvas.width - cow.size);
        cow.y = 0;
        cow.speed += 0.1; // speed up gradually
    }
}

function startGame() {
    document.getElementById("startScreen").style.display = "none";
    score = 0;
    cow.speed = 1.7;
    cow.y = 0;
    cow.x = Math.random() * (canvas.width - cow.size);
    themeMusic.currentTime = 0;
    themeMusic.play();
    gameInterval = setInterval(updateGame, 16);
}

function endGame() {
    clearInterval(gameInterval);
    themeMusic.pause();
    document.getElementById("missSound").play();
    if(score > highScore) {
        highScore = score;
        localStorage.setItem("highScore", highScore);
    }
    document.getElementById("scoreDisplay").innerText = "Score: " + score;
    document.getElementById("highScoreDisplay").innerText = "High Score: " + highScore;
    document.getElementById("gameOverScreen").style.display = "flex";
}

function restartGame() {
    document.getElementById("gameOverScreen").style.display = "none";
    startGame();
}
</script>

</body>
</html>
